# 贪吃蛇游戏硬件接线图

## 🔌 硬件清单

- **主控**: STM32F103T8C6 开发板
- **显示屏**: ST7735S TFT LCD (160x128像素)
- **传感器**: 2个 MPU6050 陀螺仪加速度计模块
- **通信**: USB转TTL串口模块（调试用）
- **电源**: 3.3V/5V电源

## 📋 详细接线表

### 1. ST7735S显示屏接线

| ST7735S引脚 | STM32F103引脚 | 功能说明 |
|------------|--------------|----------|
| VCC        | 3.3V         | 电源正极 |
| GND        | GND          | 电源负极 |
| SCL/SCK    | PA5 (SPI1_SCK) | SPI时钟线 |
| SDA/MOSI   | PA7 (SPI1_MOSI) | SPI数据线 |
| RES/RST    | PA0          | 复位引脚 |
| DC/A0      | PA1          | 数据/命令选择 |
| CS         | PA4 (SPI1_NSS) | 片选信号 |
| BLK        | PA2          | 背光控制(可选) |

### 2. MPU6050传感器接线

#### 第一个MPU6050 (玩家1控制器)
| MPU6050引脚 | STM32F103引脚 | 功能说明 |
|------------|--------------|----------|
| VCC        | 3.3V         | 电源正极 |
| GND        | GND          | 电源负极 |
| SCL        | PB6 (I2C1_SCL) | I2C时钟线 |
| SDA        | PB7 (I2C1_SDA) | I2C数据线 |
| AD0        | GND          | 地址选择(0x68) |
| INT        | 悬空         | 中断引脚(未使用) |

#### 第二个MPU6050 (玩家2控制器)
| MPU6050引脚 | STM32F103引脚 | 功能说明 |
|------------|--------------|----------|
| VCC        | 3.3V         | 电源正极 |
| GND        | GND          | 电源负极 |
| SCL        | PB6 (I2C1_SCL) | I2C时钟线 |
| SDA        | PB7 (I2C1_SDA) | I2C数据线 |
| AD0        | 3.3V         | 地址选择(0x69) |
| INT        | 悬空         | 中断引脚(未使用) |

### 3. 串口调试接线 (可选)

| USB转TTL | STM32F103引脚 | 功能说明 |
|----------|--------------|----------|
| VCC      | 3.3V/5V      | 电源(根据模块要求) |
| GND      | GND          | 电源负极 |
| TXD      | PA10 (USART1_RX) | 串口接收 |
| RXD      | PA9 (USART1_TX)  | 串口发送 |

## 🔧 接线示意图

```
                    STM32F103T8C6
                   ┌─────────────────┐
                   │                 │
    ST7735S        │  PA0 ──────── RST
    ┌─────────┐    │  PA1 ──────── DC 
    │ VCC ────┼────┤  3.3V           │
    │ GND ────┼────┤  GND            │
    │ SCK ────┼────┤  PA5 (SPI1_SCK) │
    │ MOSI────┼────┤  PA7 (SPI1_MOSI)│
    │ CS  ────┼────┤  PA4 (SPI1_NSS) │
    │ RST ────┼────┤  PA0            │
    │ DC  ────┼────┤  PA1            │
    │ BLK ────┼────┤  PA2 (可选)     │
    └─────────┘    │                 │
                   │                 │
    MPU6050 #1     │  PB6 (I2C1_SCL) │    MPU6050 #2
    (玩家1)        │  PB7 (I2C1_SDA) │    (玩家2)
    ┌─────────┐    │                 │    ┌─────────┐
    │ VCC ────┼────┤  3.3V           ├────┼──── VCC │
    │ GND ────┼────┤  GND            ├────┼──── GND │
    │ SCL ────┼────┤  PB6            ├────┼──── SCL │
    │ SDA ────┼────┤  PB7            ├────┼──── SDA │
    │ AD0 ────┼────┤  GND            │    │ AD0 ────┤
    └─────────┘    │  (地址0x68)     │    └─────────┘
                   │                 │         │
                   │                 │      3.3V
                   │                 │   (地址0x69)
                   │                 │
    串口调试        │  PA9 (USART1_TX)│
    ┌─────────┐    │  PA10(USART1_RX)│
    │ VCC ────┼────┤  3.3V           │
    │ GND ────┼────┤  GND            │
    │ RXD ────┼────┤  PA9            │
    │ TXD ────┼────┤  PA10           │
    └─────────┘    └─────────────────┘
```

## ⚡ 电源要求

- **工作电压**: 3.3V (推荐)
- **总电流**: 约200-300mA
  - STM32F103: ~50mA
  - ST7735S: ~30-50mA (背光开启时更高)
  - MPU6050 x2: ~6mA
- **电源建议**: 使用稳定的3.3V电源或通过开发板的3.3V输出

## 🔍 接线注意事项

### 1. I2C地址设置
- **MPU6050 #1**: AD0接GND，I2C地址为0x68
- **MPU6050 #2**: AD0接3.3V，I2C地址为0x69
- 两个MPU6050共用同一条I2C总线

### 2. SPI接线
- ST7735S使用SPI1接口
- 确保SPI时钟频率不超过显示屏规格
- CS片选信号低电平有效

### 3. 电源分配
- 所有模块共用3.3V电源
- 确保电源能提供足够的电流
- 建议在电源线上加滤波电容

### 4. 信号完整性
- I2C总线需要上拉电阻(通常MPU6050模块已集成)
- SPI信号线尽量短，避免干扰
- 串口线可以较长，用于调试

## 🎮 控制器使用方法

### MPU6050控制原理
- **倾斜方向控制**: 倾斜陀螺仪改变蛇的移动方向
- **阈值检测**: 倾斜角度超过设定阈值才触发方向改变
- **防抖动**: 软件实现防抖动，避免误触发

### 操作方式
- **向前倾斜**: 蛇向上移动
- **向后倾斜**: 蛇向下移动  
- **向左倾斜**: 蛇向左移动
- **向右倾斜**: 蛇向右移动

## 🔧 调试建议

1. **分步测试**:
   - 先测试ST7735S显示
   - 再测试单个MPU6050
   - 最后测试完整游戏

2. **串口调试**:
   - 使用串口输出调试信息
   - 监控MPU6050数据和游戏状态

3. **电源检查**:
   - 用万用表检查各模块电压
   - 确保电源稳定

## 🚨 故障排除

| 问题现象 | 可能原因 | 解决方法 |
|---------|---------|---------|
| 显示屏无显示 | 电源/接线问题 | 检查电源和SPI接线 |
| MPU6050无响应 | I2C接线/地址问题 | 检查I2C接线和地址设置 |
| 串口无输出 | 串口接线错误 | 检查TX/RX是否接反 |
| 游戏卡顿 | 电源不足 | 检查电源容量 |

---

**注意**: 接线前请断电操作，避免短路损坏器件。建议使用面包板或万能板进行原型搭建。
